#!/usr/bin/env python2
import McFoo.client

class ShowList(McFoo.client.McFooClientExitWhenDone):
    def remote_done(self, l):
        for s in l:
            if s.has_key('id') and s.has_key('backend') \
               and s.has_key('media') and s.has_key('name'):
                print "%-3d %s %s %s" % (s['id'], s['backend'], s['media'], s['name'])
        McFoo.client.McFooClientExitWhenDone.remote_done(self)

class McFooClientList(McFoo.client.McFooClientSimple):
    def handle_login(self, perspective):
        McFoo.client.McFooClientSimple.handle_login(self, perspective)
        self.remote.list(callback=ShowList())

def main():
    c = McFooClientList()
    c()

if __name__ == "__main__":
    main()
